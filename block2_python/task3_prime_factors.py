"""
Блок 2: Python
Задание 3: Факторизация

Реализовать функцию (или тело функции), которая при введении натурального числа n
разбивает его на простые множители (представить его в виде простых чисел).

Пример:
n = 56
print(prime_factors(n))
# Вывод:
[2, 2, 2, 7]

Оценить оптимальность решения по времени и памяти и прикрепить текст кода.
"""


def prime_factors(n):
    """
    Разбивает натуральное число на простые множители.
    
    Алгоритм:
    1. Проверяем делимость на 2 (единственное четное простое число)
    2. Проверяем делимость на нечетные числа от 3 до sqrt(n)
    3. Если после всех делений осталось число > 1, оно тоже простое
    
    Временная сложность: O(√n) в худшем случае
    Пространственная сложность: O(k), где k - количество простых множителей
    """
    if n < 2:
        return []
    
    factors = []
    
    # Проверяем делимость на 2
    while n % 2 == 0:
        factors.append(2)
        n //= 2
    
    # Проверяем делимость на нечетные числа от 3 до sqrt(n)
    i = 3
    while i * i <= n:
        while n % i == 0:
            factors.append(i)
            n //= i
        i += 2
    
    # Если после всех делений осталось число > 1, оно простое
    if n > 1:
        factors.append(n)
    
    return factors


def prime_factors_optimized(n):
    """
    Оптимизированная версия с более эффективной проверкой простых чисел.
    
    Используем тот же алгоритм, но с небольшими оптимизациями:
    - Проверяем только до sqrt(n)
    - Перебираем только нечетные числа после 2
    
    Временная сложность: O(√n)
    Пространственная сложность: O(k), где k - количество простых множителей
    """
    if n < 2:
        return []
    
    factors = []
    
    # Обработка четных делителей
    while n % 2 == 0:
        factors.append(2)
        n //= 2
    
    # Обработка нечетных делителей
    factor = 3
    while factor * factor <= n:
        while n % factor == 0:
            factors.append(factor)
            n //= factor
        factor += 2
    
    # Если осталось простое число > 2
    if n > 1:
        factors.append(n)
    
    return factors


if __name__ == "__main__":
    # Тестовые примеры
    test_cases = [56, 12, 17, 100, 97, 1, 2]
    
    for n in test_cases:
        result = prime_factors(n)
        print(f"prime_factors({n}) = {result}")
    
    # Проверка на примере из задания
    n = 56
    result = prime_factors(n)
    print(f"\nprime_factors({n}) = {result}")  # [2, 2, 2, 7]
