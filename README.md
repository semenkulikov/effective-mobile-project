# Тестовое задание - Effective Mobile

## Структура проекта

Проект организован по блокам заданий, каждый блок находится в отдельной директории:

```
effective-mobile-project/
├── README.md                    # Этот файл с полным ТЗ и описанием
├── LICENSE
├── block1_probability/          # Блок 1: Теория вероятности и логика
│   ├── task1_farmer.py          # Задание 1: Фермер
│   ├── task2_chef_competition.py # Задание 2: Кулинарное соревнование
│   └── task3_lonely_road.py     # Задание 3: Одинокая дорога
├── block2_python/               # Блок 2: Python
│   ├── task1_isomorphic.py      # Задание 1: Изоморфизмы
│   ├── task2_missing_number.py  # Задание 2: Натуральная последовательность
│   └── task3_prime_factors.py   # Задание 3: Факторизация
├── block3_sql/                  # Блок 3: SQL
│   ├── task1_applicants.sql     # Задание 1: Абитуриенты
│   ├── task2_full_join.sql      # Задание 2: FULL JOIN
│   └── task3_purchases.sql      # Задание 3: Покупки
├── block4_statistics/           # Блок 4: Статистика и АБ-тесты
│   ├── task1_samokat.py         # Задание 1: Воодушевленное руководство
│   ├── task2_pvalue.py          # Задание 2: Основной показатель в статистике
│   └── task3_parametric_test.py # Задание 3: Параметрический тест
└── block5_ml/                   # Блок 5: ML Base
    ├── task1_horses_ponies.py    # Задание 1: Пони тоже кони
    ├── task2_roc_auc.py         # Задание 2: Ручной счёт ROC_AUC
    └── task3_correlation.py     # Задание 3: Ручной счёт корреляции
```

## Запуск решений

### Python задания

Все Python файлы можно запустить напрямую:

```bash
# Блок 1: Теория вероятности
python block1_probability/task1_farmer.py
python block1_probability/task2_chef_competition.py
python block1_probability/task3_lonely_road.py

# Блок 2: Python
python block2_python/task1_isomorphic.py
python block2_python/task2_missing_number.py
python block2_python/task3_prime_factors.py

# Блок 4: Статистика
python block4_statistics/task1_samokat.py
python block4_statistics/task2_pvalue.py
python block4_statistics/task3_parametric_test.py

# Блок 5: ML Base
python block5_ml/task1_horses_ponies.py
python block5_ml/task2_roc_auc.py
python block5_ml/task3_correlation.py
```

### SQL задания

SQL файлы содержат запросы с комментариями. Их можно выполнить в любой SQL-совместимой СУБД (PostgreSQL, MySQL, SQL Server и т.д.).

## Требования

- Python 3.7+
- Библиотеки: numpy (для некоторых заданий)
- SQL-совместимая СУБД для выполнения SQL запросов

---

# Техническое задание

## Требования к данному заданию:

- мы принимаем готовое тестовое задание только в формате ссылки на GitHub
- быть готовым на собеседовании ответить на любой вопрос по отправленному решению
- права на редактирование данного задания получить нельзя, запрос отправлять бессмысленно
- в конце заданию даны рекомендации для подготовки к собеседованию

---

## Блок 1: Теория вероятности и логика

### Задание 1: Фермер

На ферме содержатся шесть разных видов животных, и каждый раз, когда фермер заходит в сарай, он видит одно случайное животное. За день фермер заходит в сарай 6 раз.

Каково математическое ожидание количества разных видов животных, которые фермер увидит за день?

**Ответ округлить до сотых, например: 4,12**

### Задание 2: Кулинарное соревнование

В конкурсе участвуют 80 шеф-поваров с уникальными уровнями мастерства. В первом этапе судьи случайным образом распределяют их по парам (в любом состязании двух шефов выигрывает тот, у кого выше уровень мастерства). На втором этапе шефы снова случайно образуют пары для финального раунда (пары могут повториться). Победную награду получают те, кто выиграл в обоих этапах.

Каково математическое ожидание числа победителей?

**Ответ округлить до десятых, например: 33,5**

### Задание 3: Одинокая дорога

На пустынном шоссе вероятность появления автомобиля за 30-минутный период составляет 0.95.

Какова вероятность его появления за 10 минут? А за 27 минут?

**Ответ дать в процентах, округлив до десятых через точку с запятой, например: 42,7; 95,0**

---

## Блок 2: Python

### Задание 1: Изоморфизмы

Реализовать функцию (или тело функции), которая проверяет на изоморфность два слова. Пояснение: строки s и t называются изоморфными, если все вхождения каждого символа строки s можно последовательно заменить другим символом и получить строку t. Порядок символов при этом должен сохраняться, а замена — быть уникальной. Так, два разных символа строки s нельзя заменить одним и тем же символом из строки t, а вот одинаковые символы в строке s должны заменяться одним и тем же символом.

```python
# Пример:
s = 'paper' 
t = 'title' 
print(is_isomorphic(s, t))
# Вывод: 
True
```

**Оценить оптимальность решения по времени и памяти и прикрепить текст кода.**

### Задание 2: Натуральная последовательность

Реализовать функцию (или тело функции), которая находит единственное отсутствующее число из последовательности натуральных чисел 1,2,…,n.

```python
# Пример:
nums = [1, 2, 3, 4, 5, 6, 8, 9, 10, 11]
print(missing_number(nums))
# Вывод: 
7
```

**Оценить оптимальность решения по времени и памяти и прикрепить текст кода.**

### Задание 3: Факторизация

Реализовать функцию (или тело функции), которая при введении натурального числа n разбивает его на простые множители (представить его в виде простых чисел).

```python
# Пример:
n = 56
print(prime_factors(n))
# Вывод:
[2, 2, 2, 7]
```

**Оценить оптимальность решения по времени и памяти и прикрепить текст кода.**

---

## Блок 3: SQL

### Задание 1: Абитуриенты

Есть таблица examination с двумя полями: id (id абитуриента), scores (кол-во набранных баллов дополнительного вступительного испытания от 0 до 100).

Требуется реализовать запрос, который создаёт колонку с позицией абитуриента в общем рейтинге.

### Задание 2: FULL JOIN

Представьте две таблицы: первая содержит 30 строк, а вторая — 20 строк. Мы выполняем операцию FULL JOIN между ними.

Какой диапазон возможного количества строк может быть в результирующей таблице, если учесть, что ключи для соединения могут быть как полностью совпадающими, так и абсолютно уникальными?

**Ответ дать в краткой форме, например: минимально 10 и максимально 3000 строк**

### Задание 3: Покупки

```sql
create table account
(
    id integer, -- ID счета
    client_id integer, -- ID клиента
    open_dt date, -- дата открытия счета
    close_dt date -- дата закрытия счета
)

create table transaction
(
    id integer,  -- ID транзакции
    account_id integer,  -- ID счета
    transaction_date date,  -- дата транзакции
    amount numeric(10,2), -- сумма транзакции
    type varchar(3) -- тип транзакции
)
```

Вывести ID клиентов, которые за последний месяц по всем своим счетам совершили покупок меньше, чем на 5000 рублей.

**Без использования подзапросов и оконных функций.**

---

## Блок 4: Статистика и АБ-тесты

### Задание 1: Воодушевленное руководство

Вы – аналитик компании Самокат (сервис по доставке продуктов на дом). Команда решила протестировать гениальную идею замены транспортного средства доставщиков и провели АБ эксперимент в небольшом городке РФ. Результаты превзошли все ожидания: время доставки значимо снизилось в несколько раз! Руководству не терпится применить изменения по всей стране.

Делаем? Выберите все верные утверждения:

1. Делаем. Только применяем изменения в таком же масштабе (количество транспортных средств с изменением), как в городе, где проводили тест.
2. Тест нерепрезентативен, поэтому результаты применять по всей стране нельзя.
3. Тест репрезентативен относительно своей генеральной совокупности: таких же небольших городов, можем применять только в подобных городах.
4. Наличие эффекта подтвердило потенциал идеи, поэтому сразу применять по всем городам не будем, но можем провести эксперимент в других городах.

### Задание 2: Основной показатель в статистике

Что такое p-value в статистическом тестировании? Выберите одно верное утверждение:

1. Вероятность, что нулевая гипотеза верна.
2. Вероятность наблюдения такого или более экстремального результата при условии, что нулевая гипотеза верна.
3. Значение уровня значимости, при котором отвергается нулевая гипотеза.
4. Среднее значение выборки.

### Задание 3: Параметрический тест

Вам необходимо провести аб-тестирование, целевая метрика - среднее число уникальных покупок на пользователя. Размер выборки велик (более 5 млн наблюдений в группах теста и контроля), значительные выбросы в выборках отсутствуют.

Можем ли мы применить t-критерий Стьюдента для проверки гипотезы о неравенстве средних в тестовой и контрольной группах при условии, что распределение уникальных покупок является логнормальным?

---

## Блок 5: ML Base

### Задание 1: Пони тоже кони

Вас просят разработать модель, классифицирующую лошадок и пони. Вместо разработки вы нашли на GitHub две интересные модели и после прогона на ваших данных одна из них показала ROC-AUC=0.7, а другая ROC-AUC=0.1. Какую модель вы возьмете для дальнейшей работы и что будете с ней делать?

**Ответ написать развернуто, но кратко, например: "первую, отниму от метрики 0.1 для корректировки точности"**

### Задание 2: Ручной счёт ROC_AUC

Классификатор выдал следующие прогнозируемые метки класса и вероятности принадлежности к классу "1". На основе полученных данных рассчитайте метрику ROC_AUC. Тезисно описать ход решения.

**Ответ округлить до сотых, например: 4,12**

| Истинная метка класса | Порог классификации (0.6) | Оценка вероятности |
|----------------------|---------------------------|-------------------|
| 1                    | 1                         | 0.95              |
| 0                    | 1                         | 0.9               |
| 1                    | 1                         | 0.85              |
| 0                    | 1                         | 0.8               |
| 1                    | 1                         | 0.75              |
| 1                    | 1                         | 0.7               |
| 1                    | 1                         | 0.65              |
| 1                    | 1                         | 0.6               |
| 0                    | 0                         | 0.55              |
| 0                    | 0                         | 0.5               |
| 0                    | 0                         | 0.45              |
| 1                    | 0                         | 0.4               |
| 0                    | 0                         | 0.35              |
| 0                    | 0                         | 0.3               |
| 0                    | 0                         | 0.25              |

### Задание 3: Ручной счёт корреляции

Рассчитайте линейную корреляцию Пирсона на основе данных.

Какой вывод можно сделать на основе полученного результата? Можно ли утверждать, что существует причинно-следственная связь между количеством чашек кофе, выпитых студентами в течение экзаменационного дня, и их итоговым баллом за экзамен?

**Ответ округлить до сотых, например: 4,12**

| Число выпитых чашек кофе | Балл за экзамен |
|-------------------------|-----------------|
| 1                       | 85              |
| 1                       | 88              |
| 2                       | 79              |
| 2                       | 81              |
| 2                       | 84              |
| 2                       | 65              |
| 3                       | 67              |
| 3                       | 58              |
| 3                       | 76              |
| 4                       | 49              |

---

## Рекомендации по подготовке к собеседованию

В случае успешного решения тестового задания рекомендуется:

- Знать основы теории вероятностей
- Знать основы математической статистики
- Иметь практический навык реализации базовых запросов на SQL
- Знать основы реализации алгоритмических задач на Python и оценки сложности алгоритмов
- Приветствуется коммерческий опыт и знания в области планирования и проведения АБ-тестов
