"""
Блок 4: Статистика и АБ-тесты
Задание 3: Параметрический тест

Вам необходимо провести аб-тестирование, целевая метрика - среднее число уникальных покупок
на пользователя. Размер выборки велик (более 5 млн наблюдений в группах теста и контроля),
значительные выбросы в выборках отсутствуют.

Можем ли мы применить t-критерий Стьюдента для проверки гипотезы о неравенстве средних
в тестовой и контрольной группах при условии, что распределение уникальных покупок
является логнормальным?
"""

"""
АНАЛИЗ ПРИМЕНИМОСТИ T-КРИТЕРИЯ СТЬЮДЕНТА:

Условия применения t-критерия Стьюдента:
1. Независимость наблюдений
2. Нормальность распределения (или достаточно большая выборка для ЦПТ)
3. Равенство дисперсий (для двухвыборочного t-теста)

Ключевые факты из задания:
- Размер выборки: > 5 млн наблюдений в каждой группе
- Распределение: логнормальное
- Выбросы: отсутствуют

АНАЛИЗ:

1. Центральная предельная теорема (ЦПТ):
   - При больших выборках (n > 30 обычно достаточно, здесь > 5 млн)
   - Распределение выборочного среднего стремится к нормальному
   - Даже если исходное распределение не нормальное
   - Это позволяет применять t-критерий

2. Логнормальное распределение:
   - Если X ~ LogNormal, то log(X) ~ Normal
   - Для больших выборок среднее X будет приблизительно нормальным (по ЦПТ)
   - T-критерий можно применять

3. Размер выборки:
   - 5 млн наблюдений - это очень большая выборка
   - ЦПТ гарантирует нормальность выборочного среднего
   - T-критерий будет работать хорошо

4. Альтернативы:
   - Можно применить логарифмическое преобразование: log(X) ~ Normal
   - Затем использовать t-критерий на преобразованных данных
   - Или использовать непараметрические тесты (Mann-Whitney U)
   - Но при таких больших выборках t-критерий будет работать

ВЫВОД:

ДА, можем применить t-критерий Стьюдента, потому что:
1. Размер выборки очень большой (> 5 млн) - ЦПТ гарантирует нормальность выборочного среднего
2. Логнормальное распределение не является препятствием при больших выборках
3. Отсутствие выбросов дополнительно поддерживает применение t-критерия

Альтернативный подход (опционально):
- Можно применить логарифмическое преобразование для улучшения нормальности
- Но это не обязательно при таких больших выборках
"""

# Ответ
answer = "ДА"

print("=" * 80)
print("ПРИМЕНИМОСТЬ T-КРИТЕРИЯ СТЬЮДЕНТА ДЛЯ ЛОГНОРМАЛЬНОГО РАСПРЕДЕЛЕНИЯ")
print("=" * 80)

print("\nУсловия задачи:")
print("- Размер выборки: > 5 млн наблюдений в каждой группе")
print("- Распределение: логнормальное")
print("- Выбросы: отсутствуют\n")

print("АНАЛИЗ:")
print("1. Центральная предельная теорема (ЦПТ):")
print("   - При больших выборках распределение выборочного среднего")
print("     стремится к нормальному, даже если исходное распределение не нормальное")
print("   - 5 млн наблюдений - более чем достаточно для применения ЦПТ\n")

print("2. Логнормальное распределение:")
print("   - Не является препятствием при больших выборках")
print("   - Выборочное среднее будет приблизительно нормальным\n")

print("3. Размер выборки:")
print("   - Очень большая выборка гарантирует нормальность выборочного среднего")
print("   - T-критерий будет работать корректно\n")

print("=" * 80)
print(f"ОТВЕТ: {answer}")
print("=" * 80)
print("\nМожем применить t-критерий Стьюдента, потому что:")
print("- Большой размер выборки (> 5 млн) гарантирует нормальность выборочного среднего")
print("- Логнормальное распределение не препятствует применению t-критерия при больших n")
print("- Отсутствие выбросов дополнительно поддерживает применение параметрического теста")
print("\nАльтернатива (опционально): можно применить логарифмическое преобразование,")
print("но это не обязательно при таких больших выборках.")
